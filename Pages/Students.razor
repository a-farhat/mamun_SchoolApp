@page "/Students"
@using  mamun_SchoolApp.Data.EFCore
@using  mamun_SchoolApp.Models
@inject mamun_SchoolApp.Data.EFCore.EfCoreStudentsRepository studentsRepository


@code{

    private List<Models.Students> students = new List<Models.Students>();
    private Models.Students student = new Models.Students();

    protected override async Task OnInitializedAsync()
    {
        students = await Task.Run(() => studentsRepository.GetAll());

    }


    private async Task LoadItems()
    {
        List<Models.Students> students = new List<Models.Students>();
        students = await Task.Run(() => studentsRepository.GetAll());
    }

    private async Task GetItem(int id)
    {
        //Models.Students student = new Models.Students();
        student = await Task.Run(() => studentsRepository.Get(id));

    }

    private async Task DeleteItem(int id)
    {
        await Task.Run(() => studentsRepository.Delete(id));
    }

    //private async Task SaveItem()
    //{
    //    if (student.Id == 0)
    //        student = studentsRepository.Add(Student);
    //    else Student = studentsRepository.Update(Student);

    //    Student = new Students();

    //    LoadItems();
    //}


    //private void SetItemValue(Students student)
    //{
    //    Student = student;
    //}
}


<h1>mamun school app</h1>

<input type="text" @bind-value="@student.Id" />
<br />
<br />
<input type="text" @bind-value="@student.name" />

@*<button class="btn btn-success" @onclick="@(e=>SaveItem())">Save</button>*@

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>id</th>
            <th>name</th>
            <th>DOB</th>
            <th>Class</th>
            <th>Country</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (Models.Students student in students)
        {
            <tr>
                <td>@student.Id</td>
                <td>@student.name</td>
                <td>@student.date_of_birth</td>
                <td>@student.Class</td>
                <td>@student.Country</td>

                <td>
                    <button class="btn btn-primary" @onclick="@(e=>GetItem(@student.Id))">Edit</button>
                    <button class="btn btn-danger" @onclick="@(e=>DeleteItem(@student.Id))">Delete</button>
                </td>
            </tr>
        }
    </tbody>
</table>



